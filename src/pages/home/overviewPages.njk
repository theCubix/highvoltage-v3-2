---
pagination:
  data: home.overviewPages
  size: 1
  alias: localisedPage
  addAllPagesToCollections: true
eleventyComputed:
  title: "{{ localisedPage.data.meta_title }}"
  metaDescription: "{{ localisedPage.data.meta_description }}"
  lastMod: "{{ localisedPage.last_publication_date }}"
permalink: "{{ nav.home[localisedPage.lang].pathPrefix }}/index.html"
translationKey: "homePage"
---

{% import 'macros.njk' as macros %}
{% set data = localisedPage.data %}

{% block content %}
<main class="stack stack--7">

  <section class="hero">
    <div class="hero__background">
      <video
        autoplay
        playsinline
        loop
        muted
        poster="{{ data.hero_image.Tablet.url }}"
        src="{{ data.hero_video.url }}"
      >
      </video>
    </div>
    <div class="hero__text pin">
      <div class="container cover">
        <div class="stack stack--3">
          {{ data.hero_title | renderAsHTML | safe }}

          <div class="stack stack--2">
            <p class="lead">{{ data.hero_introduction | renderAsText }}</p>
            {% if data.cta %}
              {{ macros.button(data.cta, href='#play-video') }}
            {% endif %}
          </div>

        </div>
      </div>
    </div>
  </section>

  <section id="play-video">
    <div class="container">
    {% set videoId = data.cta_content.embed_url | getYoutubeID %}
      <sp-video
        provider="youtube-nocookie"
        video-id="{{ videoId }}"
      >
        <!-- Custom thumbnail image, declared as slot="thumbnail" -->
        <img
          slot="thumbnail"
          width="720"
          height="405"
          loading="lazy"
          src="https://img.youtube.com/vi/{{ videoId }}/maxresdefault.jpg"
          alt=""
        />
        <!-- Custom video controller, declared as slot="controller", iframe loads on click -->
        <button
          slot="controller"
          class="button uppercase hidden-when-undefined"
        >
          {% if localisedPage.lang === 'de-ch' %}
            Video abspielen
          {% else %}
            Play video
          {% endif %}
        </button>
        <!-- Fallback for browsers that don't support custom elements, has to use class="fallback-link" -->
        <a
          href="https://www.youtube.com/watch?v={{ localisedVideo.id }}"
          class="fallback-link"
          target="blank"
          rel="noopener noreferrer"
        >
          {% if localisedPage.lang === 'de-ch' %}
            Video in neuem Tab Ã¶ffnen
          {% else %}
            Open video in new Tab
          {% endif %}
        </a>
      </sp-video>
      {# {{ macros.youtubeVideo(data.cta_content.embed_url | getYoutubeID, localisedPage.lang) }} #}
    </div>
  </section>

  {% from 'components/responsive-image.njk' import responsiveImage %}
  {% from 'svg/flash.njk' import flashIcon %}
  {% for item in data.body %}

    {% if item.slice_type == 'musicians' %}
      <section>
        <div class="container">
          <div class="stack stack--4">

            <h2>{{ item.primary.title }}</h2>

            <div>
              <ul class="grid grid--dense">
                {% for musician in item.items %}
                  <li>
                    <article class="musician">
                      {{ responsiveImage(musician.musician_image, rounded=true) }}
                      <div class="stack stack--0">
                        <h3 class="as-h4">{{ musician.musician_name }}</h3>
                        <p class="musician__function">{{ flashIcon() }}{{ musician.musician_function }}</p>
                      </div>
                    </article>
                  </li>
                {% endfor %}
              </ul>
            </div>

          </div>
        </div>
      </section>
    {% endif %}

  {% endfor %}

</main>
<script>

  if('querySelector' in document) {
    var button = document.querySelector('a.button');
    var video = document.querySelector('sp-video');
    button.addEventListener('click', () => video.setAttribute('video-loaded', ''));
  }

</script>
{% endblock %}
{% extends 'layouts/base.njk' %}

